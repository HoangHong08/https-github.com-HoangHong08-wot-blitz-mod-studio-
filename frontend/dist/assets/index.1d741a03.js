(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function y(){}function pe(t){return t()}function oe(){return Object.create(null)}function R(t){t.forEach(pe)}function ve(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function we(t){return Object.keys(t).length===0}function $e(t,...e){if(t==null)return y;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ee(t,e,n){t.$$.on_destroy.push($e(e,n))}function h(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function B(t){return document.createTextNode(t)}function w(){return B(" ")}function I(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ce(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.data!==e&&(t.data=e)}function te(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function Pe(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,i,e),o}let K;function D(t){K=t}function ge(){if(!K)throw new Error("Function called outside component initialization");return K}function me(t){ge().$$.on_mount.push(t)}function re(){const t=ge();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const s=Pe(e,n,{cancelable:i});return o.slice().forEach(c=>{c.call(t,s)}),!s.defaultPrevented}return!0}}const z=[],x=[];let H=[];const ce=[],Ee=Promise.resolve();let le=!1;function Se(){le||(le=!0,Ee.then(ye))}function se(t){H.push(t)}const ne=new Set;let A=0;function ye(){if(A!==0)return;const t=K;do{try{for(;A<z.length;){const e=z[A];A++,D(e),Te(e.$$)}}catch(e){throw z.length=0,A=0,e}for(D(null),z.length=0,A=0;x.length;)x.pop()();for(let e=0;e<H.length;e+=1){const n=H[e];ne.has(n)||(ne.add(n),n())}H.length=0}while(z.length);for(;ce.length;)ce.pop()();le=!1,ne.clear(),D(t)}function Te(t){if(t.fragment!==null){t.update(),R(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}function Le(t){const e=[],n=[];H.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),H=e}const X=new Set;let Me;function N(t,e){t&&t.i&&(X.delete(t),t.i(e))}function Q(t,e,n,i){if(t&&t.o){if(X.has(t))return;X.add(t),Me.c.push(()=>{X.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function ke(t,e){t.d(1),e.delete(t.key)}function be(t,e,n,i,o,s,c,r,a,l,f,d){let u=t.length,v=s.length,m=u;const b={};for(;m--;)b[t[m].key]=m;const S=[],O=new Map,T=new Map,$=[];for(m=v;m--;){const g=d(o,s,m),L=n(g);let M=c.get(L);M?i&&$.push(()=>M.p(g,e)):(M=l(L,g),M.c()),O.set(L,S[m]=M),L in b&&T.set(L,Math.abs(m-b[L]))}const G=new Set,k=new Set;function P(g){N(g,1),g.m(r,f),c.set(g.key,g),f=g.first,v--}for(;u&&v;){const g=S[v-1],L=t[u-1],M=g.key,J=L.key;g===L?(f=g.first,u--,v--):O.has(J)?!c.has(M)||G.has(M)?P(g):k.has(J)?u--:T.get(M)>T.get(J)?(k.add(M),P(g)):(G.add(J),u--):(a(L,c),u--)}for(;u--;){const g=t[u];O.has(g.key)||a(g,c)}for(;v;)P(S[v-1]);return R($),S}function U(t){t&&t.c()}function W(t,e,n,i){const{fragment:o,after_update:s}=t.$$;o&&o.m(e,n),i||se(()=>{const c=t.$$.on_mount.map(pe).filter(ve);t.$$.on_destroy?t.$$.on_destroy.push(...c):R(c),t.$$.on_mount=[]}),s.forEach(se)}function q(t,e){const n=t.$$;n.fragment!==null&&(Le(n.after_update),R(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Oe(t,e){t.$$.dirty[0]===-1&&(z.push(t),Se(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,i,o,s,c,r=[-1]){const a=K;D(t);const l=t.$$={fragment:null,ctx:[],props:s,update:y,not_equal:o,bound:oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:oe(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};c&&c(l.root);let f=!1;if(l.ctx=n?n(t,e.props||{},(d,u,...v)=>{const m=v.length?v[0]:u;return l.ctx&&o(l.ctx[d],l.ctx[d]=m)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](m),f&&Oe(t,d)),u}):[],l.update(),f=!0,R(l.before_update),l.fragment=i?i(l.ctx):!1,e.target){if(e.hydrate){const d=Ce(e.target);l.fragment&&l.fragment.l(d),d.forEach(C)}else l.fragment&&l.fragment.c();e.intro&&N(t.$$.fragment),W(t,e.target,e.anchor,e.customElement),ye()}D(a)}class Y{$destroy(){q(this,1),this.$destroy=y}$on(e,n){if(!ve(n))return y;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!we(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ae(t){let e,n,i,o,s,c,r,a,l,f,d;return{c(){e=p("div"),n=p("div"),n.innerHTML='<h1 class="svelte-i7i6v3">WoT Blitz Mod Studio</h1>',i=w(),o=p("div"),o.innerHTML='<span class="status svelte-i7i6v3">Ready</span>',s=w(),c=p("div"),r=p("button"),r.textContent="\u{1F4C1} Open",a=w(),l=p("button"),l.textContent="\u{1F4BE} Save",_(n,"class","toolbar-left svelte-i7i6v3"),_(o,"class","toolbar-center svelte-i7i6v3"),_(r,"title","Open file"),_(r,"class","svelte-i7i6v3"),_(l,"title","Save file"),_(l,"class","svelte-i7i6v3"),_(c,"class","toolbar-right svelte-i7i6v3"),_(e,"class","toolbar svelte-i7i6v3")},m(u,v){E(u,e,v),h(e,n),h(e,i),h(e,o),h(e,s),h(e,c),h(c,r),h(c,a),h(c,l),f||(d=[I(r,"click",t[0]),I(l,"click",t[1])],f=!0)},p:y,i:y,o:y,d(u){u&&C(e),f=!1,R(d)}}}function Fe(t){const e=re();function n(){e("open")}function i(){e("save")}return[n,i]}class ze extends Y{constructor(e){super(),V(this,e,Fe,Ae,j,{})}}function ae(t,e,n){const i=t.slice();return i[10]=e[n],i}function ue(t,e,n){const i=t.slice();return i[13]=e[n],i}function Ne(t){let e,n=[],i=new Map,o=t[1];const s=c=>c[10].name;for(let c=0;c<o.length;c+=1){let r=ae(t,o,c),a=s(r);i.set(a,n[c]=he(a,r))}return{c(){e=p("div");for(let c=0;c<n.length;c+=1)n[c].c();_(e,"class","control-tree svelte-186k24d")},m(c,r){E(c,e,r);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(c,r){r&15&&(o=c[1],n=be(n,r,s,1,c,o,i,e,ke,he,null,ae))},d(c){c&&C(e);for(let r=0;r<n.length;r+=1)n[r].d()}}}function He(t){let e;return{c(){e=p("div"),e.textContent="No file loaded. Open a file to see controls.",_(e,"class","empty-state svelte-186k24d")},m(n,i){E(n,e,i)},p:y,d(n){n&&C(e)}}}function Be(t){let e;return{c(){e=p("span"),e.textContent="\u2022",_(e,"class","expand-icon empty svelte-186k24d")},m(n,i){E(n,e,i)},p:y,d(n){n&&C(e)}}}function Re(t){let e,n=t[0].has(t[10].name)?"\u25BC":"\u25B6",i,o,s;function c(...r){return t[5](t[10],...r)}return{c(){e=p("span"),i=B(n),_(e,"class","expand-icon svelte-186k24d")},m(r,a){E(r,e,a),h(e,i),o||(s=I(e,"click",c),o=!0)},p(r,a){t=r,a&3&&n!==(n=t[0].has(t[10].name)?"\u25BC":"\u25B6")&&Z(i,n)},d(r){r&&C(e),o=!1,s()}}}function fe(t){let e,n=[],i=new Map,o=t[10].children;const s=c=>c[13].name;for(let c=0;c<o.length;c+=1){let r=ue(t,o,c),a=s(r);i.set(a,n[c]=de(a,r))}return{c(){e=p("div");for(let c=0;c<n.length;c+=1)n[c].c();_(e,"class","children svelte-186k24d")},m(c,r){E(c,e,r);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(c,r){r&6&&(o=c[10].children,n=be(n,r,s,1,c,o,i,e,ke,de,null,ue))},d(c){c&&C(e);for(let r=0;r<n.length;r+=1)n[r].d()}}}function de(t,e){let n,i,o,s=e[13].name+"",c,r,a,l;function f(){return e[7](e[13])}return{key:t,first:null,c(){n=p("div"),i=p("span"),o=B("\u2022 "),c=B(s),r=w(),_(i,"class","child-name svelte-186k24d"),_(n,"class","child-item svelte-186k24d"),this.first=n},m(d,u){E(d,n,u),h(n,i),h(i,o),h(i,c),h(n,r),a||(l=I(i,"click",f),a=!0)},p(d,u){e=d,u&2&&s!==(s=e[13].name+"")&&Z(c,s)},d(d){d&&C(n),a=!1,l()}}}function he(t,e){let n,i,o,s,c=e[10].name+"",r,a,l,f=e[10].class+"",d,u,v=e[0].has(e[10].name)&&e[10].children,m,b,S;function O(P,g){return P[10].children&&P[10].children.length>0?Re:Be}let T=O(e),$=T(e);function G(){return e[6](e[10])}let k=v&&fe(e);return{key:t,first:null,c(){n=p("div"),i=p("div"),$.c(),o=w(),s=p("span"),r=B(c),a=w(),l=p("span"),d=B(f),u=w(),k&&k.c(),m=w(),_(s,"class","control-name svelte-186k24d"),_(l,"class","control-class svelte-186k24d"),_(i,"class","control-label svelte-186k24d"),_(n,"class","control-item svelte-186k24d"),this.first=n},m(P,g){E(P,n,g),h(n,i),$.m(i,null),h(i,o),h(i,s),h(s,r),h(i,a),h(i,l),h(l,d),h(n,u),k&&k.m(n,null),h(n,m),b||(S=I(i,"click",G),b=!0)},p(P,g){e=P,T===(T=O(e))&&$?$.p(e,g):($.d(1),$=T(e),$&&($.c(),$.m(i,o))),g&2&&c!==(c=e[10].name+"")&&Z(r,c),g&2&&f!==(f=e[10].class+"")&&Z(d,f),g&3&&(v=e[0].has(e[10].name)&&e[10].children),v?k?k.p(e,g):(k=fe(e),k.c(),k.m(n,m)):k&&(k.d(1),k=null)},d(P){P&&C(n),$.d(),k&&k.d(),b=!1,S()}}}function je(t){let e,n,i,o;function s(a,l){return a[1].length===0?He:Ne}let c=s(t),r=c(t);return{c(){e=p("div"),n=p("div"),n.innerHTML='<h2 class="svelte-186k24d">Controls</h2>',i=w(),o=p("div"),r.c(),_(n,"class","sidebar-header svelte-186k24d"),_(o,"class","sidebar-content svelte-186k24d"),_(e,"class","sidebar svelte-186k24d")},m(a,l){E(a,e,l),h(e,n),h(e,i),h(e,o),r.m(o,null)},p(a,[l]){c===(c=s(a))&&r?r.p(a,l):(r.d(1),r=c(a),r&&(r.c(),r.m(o,null)))},i:y,o:y,d(a){a&&C(e),r.d()}}}function We(t,e,n){let i,{uiPackage:o=null}=e;const s=re();function c(u){s("selectControl",u)}let r=new Set;function a(u){r.has(u)?r.delete(u):r.add(u),n(0,r)}const l=(u,v)=>{v.stopPropagation(),a(u.name)},f=u=>c(u),d=u=>c(u);return t.$$set=u=>{"uiPackage"in u&&n(4,o=u.uiPackage)},t.$$.update=()=>{t.$$.dirty&16&&n(1,i=(o==null?void 0:o.Prototypes)||[])},[r,i,c,a,o,l,f,d]}class qe extends Y{constructor(e){super(),V(this,e,We,je,j,{uiPackage:4})}}function De(t){let e,n,i,o;return{c(){e=p("div"),n=p("div"),n.innerHTML="<span>YAML Editor</span>",i=w(),o=p("div"),_(n,"class","editor-header svelte-1sub6vc"),_(o,"class","editor-content svelte-1sub6vc"),_(e,"class","editor svelte-1sub6vc")},m(s,c){E(s,e,c),h(e,n),h(e,i),h(e,o),t[2](o)},p:y,i:y,o:y,d(s){s&&C(e),t[2](null)}}}function Ie(t,e,n){let{content:i=""}=e;const o=re();let s;me(async()=>{if(s){n(0,s.innerHTML="",s);const r=document.createElement("textarea");r.value=i,r.style.width="100%",r.style.height="100%",r.style.padding="1rem",r.style.fontFamily="monospace",r.style.fontSize="0.9rem",r.style.border="none",r.style.background="#1e1e1e",r.style.color="#d4d4d4",r.style.resize="none",r.style.overflow="auto",r.addEventListener("input",a=>{o("contentChanged",a.target.value)}),s.appendChild(r)}});function c(r){x[r?"unshift":"push"](()=>{s=r,n(0,s),n(1,i)})}return t.$$set=r=>{"content"in r&&n(1,i=r.content)},t.$$.update=()=>{t.$$.dirty&3&&s&&s.firstChild&&i!==s.firstChild.value&&n(0,s.firstChild.value=i,s)},[s,i,c]}class Ke extends Y{constructor(e){super(),V(this,e,Ie,De,j,{content:1})}}function Ve(t){let e,n,i,o,s;return{c(){e=p("div"),n=p("div"),n.innerHTML="<span>Preview</span>",i=w(),o=p("div"),s=p("canvas"),_(n,"class","preview-header svelte-1fe4eke"),_(s,"width",500),_(s,"height",600),te(s,"width","100%"),te(s,"height","100%"),te(s,"display","block"),_(o,"class","preview-content svelte-1fe4eke"),_(e,"class","preview svelte-1fe4eke")},m(c,r){E(c,e,r),h(e,n),h(e,i),h(e,o),h(o,s),t[3](s)},p:y,i:y,o:y,d(c){c&&C(e),t[3](null)}}}function Ye(t,e,n){let{uiPackage:i=null}=e,{selectedControl:o=null}=e,s;me(()=>{if(s){const l=s.getContext("2d");if(l){l.fillStyle="#2d2d2d",l.fillRect(0,0,s.width,s.height),l.strokeStyle="#3e3e3e",l.lineWidth=1;for(let f=0;f<s.width;f+=50)l.beginPath(),l.moveTo(f,0),l.lineTo(f,s.height),l.stroke();for(let f=0;f<s.height;f+=50)l.beginPath(),l.moveTo(0,f),l.lineTo(s.width,f),l.stroke()}}});function c(l,f,d=0,u=0){var O,T;if(!f||!f.size)return;const v=(((O=f.position)==null?void 0:O.x)||0)+d,m=(((T=f.position)==null?void 0:T.y)||0)+u,b=f.size.x,S=f.size.y;l.fillStyle=(o==null?void 0:o.name)===f.name?"#4CAF50":"#3e3e3e",l.fillRect(v,m,b,S),l.strokeStyle=(o==null?void 0:o.name)===f.name?"#66BB6A":"#555",l.lineWidth=1,l.strokeRect(v,m,b,S),b>20&&S>20&&(l.fillStyle="#d4d4d4",l.font="12px monospace",l.fillText(f.name,v+4,m+16))}function r(){if(!s||!i)return;const l=s.getContext("2d");if(!!l){l.fillStyle="#1e1e1e",l.fillRect(0,0,s.width,s.height),l.strokeStyle="#3e3e3e",l.lineWidth=1;for(let f=0;f<s.width;f+=50)l.beginPath(),l.moveTo(f,0),l.lineTo(f,s.height),l.stroke();for(let f=0;f<s.height;f+=50)l.beginPath(),l.moveTo(0,f),l.lineTo(s.width,f),l.stroke();i.Prototypes&&i.Prototypes.forEach(f=>{c(l,f),f.children&&f.children.forEach(d=>{var u,v;c(l,d,((u=f.position)==null?void 0:u.x)||0,((v=f.position)==null?void 0:v.y)||0)})}),l.fillStyle="#888",l.font="12px monospace",l.fillText("Preview - drag canvas to pan",5,s.height-5)}}function a(l){x[l?"unshift":"push"](()=>{s=l,n(0,s)})}return t.$$set=l=>{"uiPackage"in l&&n(1,i=l.uiPackage),"selectedControl"in l&&n(2,o=l.selectedControl)},t.$$.update=()=>{t.$$.dirty&1&&s&&r()},[s,i,o,a]}class Ge extends Y{constructor(e){super(),V(this,e,Ye,Ve,j,{uiPackage:1,selectedControl:2})}}const F=[];function ie(t,e=y){let n;const i=new Set;function o(r){if(j(t,r)&&(t=r,n)){const a=!F.length;for(const l of i)l[1](),F.push(l,t);if(a){for(let l=0;l<F.length;l+=2)F[l][0](F[l+1]);F.length=0}}}function s(r){o(r(t))}function c(r,a=y){const l=[r,a];return i.add(l),i.size===1&&(n=e(o)||y),r(t),()=>{i.delete(l),i.size===0&&n&&(n(),n=null)}}return{set:o,update:s,subscribe:c}}function Je(t,e,n){return window.go.main.App.SaveFile(t,e,n)}function Qe(t){let e,n,i,o,s,c,r,a,l,f;return n=new ze({}),n.$on("open",Xe),n.$on("save",t[6]),s=new qe({props:{uiPackage:t[1]}}),s.$on("selectControl",t[8]),r=new Ke({props:{content:t[0]}}),r.$on("contentChanged",t[7]),l=new Ge({props:{uiPackage:t[1],selectedControl:t[2]}}),{c(){e=p("div"),U(n.$$.fragment),i=w(),o=p("div"),U(s.$$.fragment),c=w(),U(r.$$.fragment),a=w(),U(l.$$.fragment),_(o,"class","main svelte-1i2u7k1"),_(e,"class","app svelte-1i2u7k1")},m(d,u){E(d,e,u),W(n,e,null),h(e,i),h(e,o),W(s,o,null),h(o,c),W(r,o,null),h(o,a),W(l,o,null),f=!0},p(d,[u]){const v={};u&2&&(v.uiPackage=d[1]),s.$set(v);const m={};u&1&&(m.content=d[0]),r.$set(m);const b={};u&2&&(b.uiPackage=d[1]),u&4&&(b.selectedControl=d[2]),l.$set(b)},i(d){f||(N(n.$$.fragment,d),N(s.$$.fragment,d),N(r.$$.fragment,d),N(l.$$.fragment,d),f=!0)},o(d){Q(n.$$.fragment,d),Q(s.$$.fragment,d),Q(r.$$.fragment,d),Q(l.$$.fragment,d),f=!1},d(d){d&&C(e),q(n),q(s),q(r),q(l)}}}let _e=null,Ue=!1;async function Xe(){try{console.log("Open file handler needed")}catch(t){console.error("Error opening file:",t)}}function Ze(t,e,n){let i,o,s,c=ie("");ee(t,c,u=>n(0,i=u));let r=ie(null);ee(t,r,u=>n(1,o=u));let a=ie(null);ee(t,a,u=>n(2,s=u));async function l(){try{if(!_e){alert("No file open");return}await Je(_e,i,Ue),alert("File saved successfully")}catch(u){console.error("Error saving file:",u),alert("Error saving file: "+u)}}function f(u){c.set(u.detail)}function d(u){a.set(u.detail)}return[i,o,s,c,r,a,l,f,d]}class xe extends Y{constructor(e){super(),V(this,e,Ze,Qe,j,{})}}new xe({target:document.getElementById("app")});
